
<style>

  .tt_controls_lifespan_in_years #num, #char, #qwerty, #plus, #apostrophe, #star, 
      #Unknown, #abc, #date, #slash, #minus, #comma, #percent, #decimal {
    display: none;
  }

  .tt_controls_qauntity #num, #char, #qwerty, #plus, #apostrophe, #star, #abc, 
      #Unknown, #date, #slash, #minus, #comma, #percent, #decimal {
    display: none;
  }

  .tt_controls_cost #num, #char, #qwerty, #plus, #apostrophe, #star, #abc, 
      #Unknown, #date, #slash, #minus, #comma, #percent {
    display: none;
  }

</style>


<script>                                                                        

tt_cancel_destination = '/assets'

function getSerialNumber() {                                                           
    var serial_num = document.getElementById('asset_serial_num');               
                                                                                  
    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari  
        xmlhttp=new XMLHttpRequest();                                             
      }else{// code for IE6, IE5                                                  
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");                           
      }                                                                           
      xmlhttp.onreadystatechange=function() {                                     
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {                       
          var results = xmlhttp.responseText;                                     
          if(results) {                           
            serial_num.value = results;
          }                                                                     
        }                                                                         
      }                                                                           
      xmlhttp.open("GET","/serial_number_generator",true); 
      xmlhttp.send();                                                             
    }

  function nameSuggestions() {                                    
    url = "/assets/find_by_name?search_str=";                          
    $('touchscreenInput'+tstCurrentPage).setAttribute('ajaxURL', url);          
    listSuggestions(tstCurrentPage);                                            
  }

  function modelSuggestions() {                                    
    url = "/assets/find_by_model?search_str=";                          
    $('touchscreenInput'+tstCurrentPage).setAttribute('ajaxURL', url);          
    listSuggestions(tstCurrentPage);                                            
  }

  function versionSuggestions() {                                    
    url = "/assets/find_by_model?search_str=";                          
    $('touchscreenInput'+tstCurrentPage).setAttribute('ajaxURL', url);          
    listSuggestions(tstCurrentPage);                                            
  }

</script>


<div class="page-header">
  <h1>assets <small>register an asset</small></h1>
</div>

<section id='modals'>                                              
  <div class="content-details">
  <%= form_tag :action => 'create', :method => :post  do %>

  <table class="asset-details">                                              
  <tbody>                                                                       
    <tr>                                                                        
      <td><%=text_field(:asset, :name, 
        :tt_onLoad => 'nameSuggestions();', 
        :allowFreeText => true ,                           
        :ajaxURL => '',:helpText => "Name") %> </td>
    </tr>                                                                       
    <tr>                                                                        
      <td><%=text_field(:asset, :serial_num, 
        :helpText => "Serial number") %>
    </tr>                                                                       
    <tr>                                                                        
      <td><%=text_field(:asset, :model ,
        :tt_onLoad => 'modelSuggestions();', :allowFreeText => true ,                                                
        :ajaxURL => '', :helpText => "Model") %> </td>
    </tr>                                                                       
    <tr>                                                                        
      <td><%=text_field(:asset, :version ,
          :tt_onLoad => 'versionSuggestions();', :allowFreeText => true ,
          :ajaxURL => '', :helpText => "Version") %> </td>
    </tr>                                                                       
    <tr>                                                                        
      <td>   
        <%= select_tag "asset[category]", options_for_select(@categories),
          :helpText => "Category" %>                                              
      </td>                                                                     
    </tr>                                                                       
    <tr>                                                                        
      <td>                                                                      
        <%= select_tag "asset[manufacturer]", options_for_select(@manufacturers),
          :helpText => "Manufacturer" %>                                              
      </td>                                                                     
    </tr>                                                                       
    <tr>                                                                        
      <td><%=text_field(:asset, :lifespan ,:field_type => 'number',
           :helpText => "Lifespan in years") %> </td>
    </tr>                                                                       
    <tr>                                                                        
      <td>                                                                      
        <%= select_tag "work[project]", options_for_select(@projects),
          :helpText => "Project" %>                                              
      </td>                                                                     
    </tr>                                                                       
    <tr>                                                                        
      <td>                                                                      
        <%= select_tag "work[donor]", options_for_select(@donors),
          :helpText => "Donor" %>                                              
      </td>                                                                     
    </tr>                                                                       
    <tr>                                                                        
      <td>                                                                      
        <%= select_tag "vendor[supplier]", options_for_select(@suppliers),
          :helpText => "Supplier" %>                                              
      </td>                                                                     
    </tr>                                                                       
    <tr>                                                                        
      <td><%=text_field(:vendor, :invoice_num, :helpText => "Invoice number") %> </td>
    </tr>                                                                       
    <tr>                                                                        
      <td><%=text_field(:vendor, :date_of_invoice,  
          :helpText => "Invoice date", :field_type => 'date',                 
          :maxDate => "#{Date.today.to_date}") %> </td>
    </tr>                                                                       
    <tr>                                                                        
      <td><%=text_field(:vendor, :quantity, :field_type => 'number',
          :helpText => "Quantity") %> </td>
    </tr>                                                                       
    <tr>                                                                        
      <td><%=text_field(:vendor, :cost, :helpText => "Cost",:field_type => 'number') %>

        <%= select_tag "vendor[currency]", options_for_select(@currencies),
          :helpText => "Select ocost currency" %>                                              
      </td>                                                                       
    </tr>                                                                       
    <tr>                                                                        
      <td><hr /></td>   
    </tr>                                                                       
    <tr>                                                                        
      <td><%=text_field(:organisation, :receipt_date, 
          :helpText => "Date of receipt",:field_type => 'date',                                                      
          :maxDate => "#{Date.today.to_date}") %> 
      </td>
    </tr>                                                                       
    <tr>                                                                        
      <td><%=text_field(:organisation, :delivered_by, :helpText => "Delivered by") %> </td>
    </tr>                                                                       
    <tr>                                                                        
      <td>                                                                      
        <%= select_tag "organisation[delivery_status]", options_for_select(@status),
          :helpText => "Delivery status" %>                                              
      </td>                                                                     
    </tr>                                                                       
    <tr>                                                                        
      <td>                                                                      
        <%= select_tag "organisation[current_status]", options_for_select(@status),
          :helpText => "Current status" %>                                              
      </td>                                                                     
    </tr>                                                                       
    <tr>                                                                        
      <td>                                                                      
        <%= select_tag "organisation[location]", options_for_select(@location),
          :helpText => "Select store room location" %>                                              
      </td>                                                                     
    </tr>                                                                       
  </tbody>                                                                      
 </table>
                      
 <%end%>
</div>                                                      
</section> 

