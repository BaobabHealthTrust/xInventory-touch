<%=javascript_include_tag "prototype"%>                                         
<%=javascript_include_tag "jquery_data_table" %>                                
<%=javascript_include_tag "jquery.dataTables.min" %>                            
                                                                                
<%= stylesheet_link_tag "demo_table" %>                                         
<%= stylesheet_link_tag "demo_table_jui" %>                                     
<%= stylesheet_link_tag "demo_page" %>

<style>
  #content-heading {                                                                 
    color: #404040;                                                               
    font-family: Verdana,Tahoma,Arial;                                            
    font-size: 14px;                                                              
    width: 99%;   
    background: none repeat scroll 0 0 rgb(255, 235, 144);                      
    height: auto;                                                               
    border: 1px solid #696969;                                                              
    padding: 10px;
  }

  #content-data {                                                                 
    color: black;                                                               
    font-family: Verdana,Tahoma,Arial;                                            
    font-size: 14px;                                                              
    width: 99%;   
    background-color: white;                      
    height: auto;                                                               
    padding: 10px;
  }
  
</style>


<script>
 function dataT(){                                                               
    $('#search_results').dataTable();                                                  
 }

 function getData() {                                                       
    var start_date = document.getElementById('report_start_date').value;               
    var end_date = document.getElementById('report_end_date').value;               
                                                                                
    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari  
        xmlhttp=new XMLHttpRequest();                                             
      }else{// code for IE6, IE5                                                  
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");                           
      }                                                                           
      xmlhttp.onreadystatechange=function() {                                     
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {                       
          var results = xmlhttp.responseText;                                     
          if(results == 'undefined' || results == '' || results == '"not validate"') {                           
            return;                                                               
          }else if(results.length > 0){
            document.getElementById('content-data').innerHTML = results;                                                           
            dataT();                                                              
          }else{
            return;
          }                                             
        }                                                                         
      }                                                                           
      xmlhttp.open("GET","/search_for_dispatched_assets?start_date="+start_date + "&end_date=" + end_date,true);           
      xmlhttp.send();                                                             
    }  


</script>


<div class="page-header">                                                       
  <h1>report <small>List of items dispatched showing the final location of the item</small></h1>                              
</div>

<div id = "content-heading">                                                     
  <table style="width: 99%;">
    <tr>
      <td colspan="2"><%=text_field(:report, :start_date ,:placeholder => "Start date") %></td>
    </tr>
    <tr>
      <td><%=text_field(:report, :end_date ,:placeholder => "End date") %></td>
      <td>
          <input onclick="getData();" type="button" id="signup"                
          class="btn btn-primary signup_btn" value="Apply" style="width:100%;" />
      </td>
    </tr>
  </table>
</div>

<br><hr /></br>

<div id = "content-data">                                                     

<section id='modals'>                                              
  <table id="search_results" class="table table-striped table-bordered table-condensed">
  <thead>                                                                       
  <tr id = 'table_head'>                                                        
    <tr id = 'table_head'>                                                        
    <th id="th3" style="width:200px;">Asset</th>                                 
    <th id="th1" style="width:200px;">Serial number</th>                        
    <th id="th4" style="width:200px;">Model</th>                                
    <th id="th5" style="width:200px;">Purchase date</th>                                
    <th id="th8" style="width:150px;">Donor</th>                                
    <th id="th8" style="width:150px;">Project</th>                              
    <th id="th8" style="width:150px;">Supplier</th>                             
    <th id="th8" style="width:150px;">Order Number</th>                             
    <th id="th8" style="width:150px;">Quantity</th>                             
    <th id="th8" style="width:150px;">Cost</th>                                 
  </tr>                                                                         
  </thead>                                                                      
  <tbody id='results'>                                                          
    <div id="table-data"></div>
    <tfoot>                                                                 
      <tr>                                                                    
        <th style="text-align:left;paddding-left:5px;" colspan="9">Total:</th>
        <th></th>                                              
      </tr>                                                                   
    </tfoot>
  </tbody>                                                                      
  </table>
</section> 

</div>


<script>                                                                        
  dataT();                                                                      
</script> 
